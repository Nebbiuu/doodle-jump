<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mouvement</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <div id="games-container">
      
    </div>
    <div id="best-weights" class="hidden">
      <button id="stop-button">Stop and Show Best Weights</button>
      <textarea id="weights-textarea" readonly></textarea>
      <button id="copy-button">Copy to Clipboard</button>
      <button id="multi-ai-button"><a href="solo.html">Solo</a></button>
      <canvas id="scoreChart"></canvas>
    </div>
    <script src="js/player.js"></script>
    <script src="js/platformManager.js"></script>
    <script src="js/collisionManager.js"></script>
    <script src="js/scoreManager.js"></script>
    <script src="js/tileManager.js"></script>
    <script src="js/view.js"></script>
    <script src="js/model.js"></script>
    <script src="js/AIController.js"></script>
    <script src="js/controller.js"></script>
    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // Données des meilleurs scores (exemple initial)
      let bestScoresHistory = [];

      // Référence au graphique Chart.js
      let ctx = document.getElementById("scoreChart").getContext("2d");
      const scoreChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: [], // Étiquettes des générations
          datasets: [
            {
              label: "Score Moyen des 3 Meilleurs",
              data: [],
              borderColor: "red",
              fill: false,
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            y: { beginAtZero: true },
          },
        },
      });

      // Fonction pour ajouter une nouvelle génération de scores
      function addNewBestScores(newBestScores) {
        if (!Array.isArray(newBestScores) || newBestScores.length !== 3) return;

        // Ajout des scores à l'historique
        bestScoresHistory.push(newBestScores.map((bot) => bot.score));

        // Mise à jour des labels (numéro de génération)
        scoreChart.data.labels.push(bestScoresHistory.length);

        // Mise à jour des données des courbes
        for (let i = 0; i < 3; i++) {
          scoreChart.data.datasets[i].data.push(newBestScores[i].score);
        }

        // Rafraîchir le graphique
        scoreChart.update();
      }
    </script>
  </body>
</html>
